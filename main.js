/*! Kbd Plugin for Obsidian | MIT License | Keith Walsh */
"use strict";var w=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var W=Object.getOwnPropertyNames;var G=Object.prototype.hasOwnProperty;var H=(s,e)=>{for(var t in e)w(s,t,{get:e[t],enumerable:!0})},C=(s,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of W(e))!G.call(s,l)&&l!==t&&w(s,l,{get:()=>e[l],enumerable:!(a=P(e,l))||a.enumerable});return s};var R=s=>C(w({},"__esModule",{value:!0}),s);var L={};H(L,{default:()=>m});module.exports=R(L);var S=require("obsidian");var x={kbdStyle:"default"};var K={en:{"select-text-notice":"Please select text to wrap in <kbd> tags.","menu-item-title":"<kbd>","settings-title":"Kbd Style Settings","style-setting":"Kbd Style","style-setting-desc":"Choose the visual style for <kbd> tags","style-default":"Default","style-github":"GitHub","style-stackoverflow":"Stack Overflow"},es:{"select-text-notice":"Por favor selecciona texto para envolver en etiquetas <kbd>.","menu-item-title":"<kbd>","settings-title":"Configuraci\xF3n de Estilo Kbd","style-setting":"Estilo Kbd","style-setting-desc":"Elige el estilo visual para las etiquetas <kbd>","style-default":"Predeterminado","style-github":"GitHub","style-stackoverflow":"Stack Overflow"},fr:{"select-text-notice":"Veuillez s\xE9lectionner du texte \xE0 envelopper dans les balises <kbd>.","menu-item-title":"<kbd>","settings-title":"Param\xE8tres de Style Kbd","style-setting":"Style Kbd","style-setting-desc":"Choisissez le style visuel pour les balises <kbd>","style-default":"Par d\xE9faut","style-github":"GitHub","style-stackoverflow":"Stack Overflow"},de:{"select-text-notice":"Bitte w\xE4hlen Sie Text aus, um ihn in <kbd>-Tags zu verpacken.","menu-item-title":"<kbd>","settings-title":"Kbd-Stil-Einstellungen","style-setting":"Kbd-Stil","style-setting-desc":"W\xE4hlen Sie den visuellen Stil f\xFCr <kbd>-Tags","style-default":"Standard","style-github":"GitHub","style-stackoverflow":"Stack Overflow"},it:{"select-text-notice":"Seleziona il testo da avvolgere nei tag <kbd>.","menu-item-title":"<kbd>","settings-title":"Impostazioni Stile Kbd","style-setting":"Stile Kbd","style-setting-desc":"Scegli lo stile visivo per i tag <kbd>","style-default":"Predefinito","style-github":"GitHub","style-stackoverflow":"Stack Overflow"},pt:{"select-text-notice":"Selecione o texto para envolver em tags <kbd>.","menu-item-title":"<kbd>","settings-title":"Configura\xE7\xF5es de Estilo Kbd","style-setting":"Estilo Kbd","style-setting-desc":"Escolha o estilo visual para tags <kbd>","style-default":"Padr\xE3o","style-github":"GitHub","style-stackoverflow":"Stack Overflow"},ru:{"select-text-notice":"\u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u0432\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0435\u043A\u0441\u0442 \u0434\u043B\u044F \u043E\u0431\u0435\u0440\u0442\u044B\u0432\u0430\u043D\u0438\u044F \u0432 \u0442\u0435\u0433\u0438 <kbd>.","menu-item-title":"<kbd>","settings-title":"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0421\u0442\u0438\u043B\u044F Kbd","style-setting":"\u0421\u0442\u0438\u043B\u044C Kbd","style-setting-desc":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0437\u0443\u0430\u043B\u044C\u043D\u044B\u0439 \u0441\u0442\u0438\u043B\u044C \u0434\u043B\u044F \u0442\u0435\u0433\u043E\u0432 <kbd>","style-default":"\u041F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E","style-github":"GitHub","style-stackoverflow":"Stack Overflow"},zh:{"select-text-notice":"\u8BF7\u9009\u62E9\u8981\u7528 <kbd> \u6807\u7B7E\u5305\u88C5\u7684\u6587\u672C\u3002","menu-item-title":"<kbd>","settings-title":"Kbd \u6837\u5F0F\u8BBE\u7F6E","style-setting":"Kbd \u6837\u5F0F","style-setting-desc":"\u9009\u62E9 <kbd> \u6807\u7B7E\u7684\u89C6\u89C9\u6837\u5F0F","style-default":"\u9ED8\u8BA4","style-github":"GitHub","style-stackoverflow":"Stack Overflow"},ja:{"select-text-notice":"<kbd>\u30BF\u30B0\u3067\u56F2\u3080\u30C6\u30AD\u30B9\u30C8\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002","menu-item-title":"<kbd>","settings-title":"Kbd \u30B9\u30BF\u30A4\u30EB\u8A2D\u5B9A","style-setting":"Kbd \u30B9\u30BF\u30A4\u30EB","style-setting-desc":"<kbd>\u30BF\u30B0\u306E\u8996\u899A\u30B9\u30BF\u30A4\u30EB\u3092\u9078\u629E","style-default":"\u30C7\u30D5\u30A9\u30EB\u30C8","style-github":"GitHub","style-stackoverflow":"Stack Overflow"},ko:{"select-text-notice":"<kbd> \uD0DC\uADF8\uB85C \uAC10\uC300 \uD14D\uC2A4\uD2B8\uB97C \uC120\uD0DD\uD558\uC138\uC694.","menu-item-title":"<kbd>","settings-title":"Kbd \uC2A4\uD0C0\uC77C \uC124\uC815","style-setting":"Kbd \uC2A4\uD0C0\uC77C","style-setting-desc":"<kbd> \uD0DC\uADF8\uC758 \uC2DC\uAC01\uC801 \uC2A4\uD0C0\uC77C \uC120\uD0DD","style-default":"\uAE30\uBCF8\uAC12","style-github":"GitHub","style-stackoverflow":"Stack Overflow"}};function D(){let s=window.moment?.locale?.()||navigator.language?.substring(0,2)||"en";return K[s]?s:"en"}function o(s){let e=D();return K[e]?.[s]||K.en[s]||s}var h=require("obsidian");var k=class extends h.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:o("settings-title")}),new h.Setting(e).setName(o("style-setting")).setDesc(o("style-setting-desc")).addDropdown(t=>t.addOption("default",o("style-default")).addOption("github",o("style-github")).addOption("stackoverflow",o("style-stackoverflow")).setValue(this.plugin.settings.kbdStyle).onChange(async a=>{this.plugin.settings.kbdStyle=a,await this.plugin.saveSettings()}))}};var m=class extends S.Plugin{constructor(){super(...arguments);this.settings=x}wrapSelectionWithKbd(t){let a=t.listSelections(),l=(i,n)=>i.line<n.line||i.line===n.line&&i.ch<=n.ch,c=!1;a.slice().reverse().forEach(i=>{let n=l(i.anchor,i.head)?i.anchor:i.head,b=l(i.anchor,i.head)?i.head:i.anchor,r=t.getRange(n,b);if(r.length>0){if(r.startsWith("<kbd>")&&r.endsWith("</kbd>")){let v=r.slice(5,-6);t.replaceRange(v,n,b),c=!0;return}let f=t.posToOffset.bind(t),d=t.offsetToPos.bind(t),y=f(n),p=f(b);if(y>=5){let v=t.getRange(d(y-5),n),O=t.getRange(b,d(p+6));if(v==="<kbd>"&&O==="</kbd>"){t.replaceRange(r,d(y-5),d(p+6)),c=!0;return}}t.replaceRange(`<kbd>${r}</kbd>`,n,b),c=!0;return}let g=n,E=t.getLine(g.line),T=/<kbd>(.*?)<\/kbd>/g,u;for(;(u=T.exec(E))!==null;){let f=u.index,d=u.index+u[0].length;if(g.ch>=f&&g.ch<=d){let y={line:g.line,ch:f},p={line:g.line,ch:d};t.replaceRange(u[1],y,p),c=!0;break}}}),c||new S.Notice(o("select-text-notice"))}async onload(){await this.loadSettings(),this.applyKbdStyle(),this.addCommand({id:"wrap-selection-with-kbd",name:"Wrap selection with <kbd>",editorCallback:t=>{this.wrapSelectionWithKbd(t)}}),this.registerEvent(this.app.workspace.on("editor-menu",(t,a)=>{t.addSeparator(),t.addItem(l=>{l.setTitle(o("menu-item-title")).setIcon("keyboard").onClick(()=>{this.wrapSelectionWithKbd(a)})})})),this.addSettingTab(new k(this.app,this))}onunload(){document.body.classList.remove("kbd-style-default","kbd-style-github","kbd-style-stackoverflow")}async loadSettings(){this.settings={...x,...await this.loadData()}}async saveSettings(){await this.saveData(this.settings),this.applyKbdStyle()}applyKbdStyle(){document.body.classList.remove("kbd-style-default","kbd-style-github","kbd-style-stackoverflow"),document.body.classList.add(`kbd-style-${this.settings.kbdStyle}`)}};
